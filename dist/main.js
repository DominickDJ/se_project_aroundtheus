!function(){var e={240:function(){}},t={};function o(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,o),n.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";class e{constructor(e,t){let{data:o,handleImageClick:s}=e;this._name=o.name,this._link=o.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({link:this._link,text:this._text})}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_clicked")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_handleImageClick(){modalPicture.src=this._link,modalPicture.alt=`Photo of ${this._name}`,modalPictureDescription.textContent=this._name,open(pictureModal)}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement}}class t{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose),this._closeButton.addEventListener("click",this._handleClickClose),this._popupElement.addEventListener("mousedown",this._handleClickClose)}close(){document.removeEventListener("keydown",this._handleEscapeClose),this._popupElement.removeEventListener("mousedown",this._handleClickClose),this._popupElement.classList.remove("modal_opened"),this._closeButton.removeEventListener("click",this._handleClickClose)}_handleClickClose=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()};_handleEscapeClose=e=>{"Escape"===e.key&&this.close()}}class s extends t{constructor(e){let{popupSelector:t,handleFormSubmit:o}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupElement.querySelectorAll(".modal__input"),this._handleFormSubmit=o,this._handleSubmit=this._handleSubmit.bind(this)}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}_handleSubmit(){this._handleFormSubmit(this._getInputValues())}open(){this._popupForm.addEventListener("submit",this._handleSubmit),super.open()}close(){this._popupForm.removeEventListener("submit",this._handleSubmit),this._popupForm.reset(),super.close()}}const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};var n=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_showInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}resetValidation(){this._form.reset(),this.disableButton()}},r=o(240),l=o.n(r);document.querySelector(".profile__edit-button").addEventListener("click",(()=>{const e=b.getUserInfo();a.resetValidation(),_.open(),_.setInputValues(e)})),document.querySelector(".profile__add-button").addEventListener("click",(()=>{c.resetValidation(),m.open()})),document.querySelector("card__delete-button").addEventListener("click",(()=>{p.open()}));const a=new n(i,document.querySelector("#edit-form"));a.enableValidation();const c=new n(i,document.querySelector("#add-modal").querySelector("#add-form"));c.enableValidation();const u=t=>{const o=new e({data:t,handleImageClick:e=>{h.open(e)}},"#card-template").getView();d.addItem(o)},d=new class{constructor(e,t){let{items:o,renderer:s}=e;this._renderer=s,this._items=o,this._galleryCards=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._galleryCards.prepend(e)}}({items:[{name:"Tokyo",link:"https://images.unsplash.com/photo-1678951310861-60299f9b0162?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Golden Gate Bridge",link:"https://images.unsplash.com/photo-1603389865219-669a0768193e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Pleasure Pier TX",link:"https://images.unsplash.com/photo-1598805291186-612c3ca482a6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8cGxlYXN1cmUlMjBwaWVyfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=400&q=60"},{name:"Oceanside CA",link:"https://images.unsplash.com/photo-1528521712081-0480efff6665?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Yellowstone National Park",link:"https://images.unsplash.com/photo-1586968332704-0160550f3ec1?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTV8fHllbGxvd3N0b25lJTIwbmF0aW9uYWwlMjBwYXJrfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=400&q=60"},{name:"Venice",link:"https://images.unsplash.com/photo-1516483638261-f4dbaf036963?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8aXRhbHl8ZW58MHx8MHx8&auto=format&fit=crop&w=400&q=60"}],renderer:u},".gallery__cards");d.renderItems();const h=new class extends t{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._modalPicture=this._popupElement.querySelector(".modal__picture"),this._modalPictureDescription=this._popupElement.querySelector(".modal__picture-description")}open(e){this._modalPicture.src=e.link,this._modalPicture.alt=`Photo of ${e.name}`,this._modalPictureDescription.textContent=e.name,super.open()}}({popupSelector:"#picture-modal"}),m=new s({popupSelector:"#add-modal",handleFormSubmit:e=>{u(e),m.close()}}),_=new s({popupSelector:"#edit-modal",handleFormSubmit:e=>{b.setUserInfo(e),_.close()}}),p=new s({popupSelector:"#confirm-modal",handleFormSubmit:()=>{p.close()}}),f=new s({popupSelector:"#avatar-modal",handleFormSubmit:e=>{f.close(e)}}),b=new class{constructor(e,t){this.userName=document.querySelector(e),this.userJob=document.querySelector(t)}getUserInfo(){return{userName:this.userName.textContent,userJob:this.userJob.textContent}}setUserInfo(e){let{userJob:t,userName:o}=e;this.userName.textContent=o,this.userJob.textContent=t}}(".profile__title",".profile__description");new(l())({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"36d4ccce-10c3-4fd1-8e69-65692c768133","Content-Type":"application/json"}}).getInitialCards().then((e=>{})).catch((e=>{console.error(e)}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQ2xCQyxRQUFTLGlEQUNUQyxRQUFTLENBQ1BDLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBS2pCQyxrQkFDQUMsTUFBTUMsUUFHTkMsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3ByYWN0aWN1bS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9wcmFjdGljdW0vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ByYWN0aWN1bS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG5cdFx0ZnVuY3Rpb24oKSB7IHJldHVybiBtb2R1bGU7IH07XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUltYWdlQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpO1xyXG4gICAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCB0ZXh0OiB0aGlzLl90ZXh0IH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fY2xpY2tlZFwiKTtcclxuICB9XHJcbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUltYWdlQ2xpY2soKSB7XHJcbiAgICBtb2RhbFBpY3R1cmUuc3JjID0gdGhpcy5fbGluaztcclxuICAgIG1vZGFsUGljdHVyZS5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICBtb2RhbFBpY3R1cmVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBvcGVuKHBpY3R1cmVNb2RhbCk7XHJcbiAgfVxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UpO1xyXG4gIH1cclxuICBfaGFuZGxlQ2xpY2tDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVFc2NhcGVDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gdGhpcy5faGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgfVxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlU3VibWl0KCkge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJUb2t5b1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTY3ODk1MTMxMDg2MS02MDI5OWY5YjAxNjI/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY4NyZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkdvbGRlbiBHYXRlIEJyaWRnZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwMzM4OTg2NTIxOS02NjlhMDc2ODE5M2U/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY4NyZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlBsZWFzdXJlIFBpZXIgVFhcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTg4MDUyOTExODYtNjEyYzNjYTQ4MmE2P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4elpXRnlZMmg4T0h4OGNHeGxZWE4xY21VbE1qQndhV1Z5ZkdWdWZEQjhmREI4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz00MDAmcT02MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJPY2VhbnNpZGUgQ0FcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1Mjg1MjE3MTIwODEtMDQ4MGVmZmY2NjY1P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODcmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJZZWxsb3dzdG9uZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTg2OTY4MzMyNzA0LTAxNjA1NTBmM2VjMT9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHpaV0Z5WTJoOE1UVjhmSGxsYkd4dmQzTjBiMjVsSlRJd2JtRjBhVzl1WVd3bE1qQndZWEpyZkdWdWZEQjhmREI4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz00MDAmcT02MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWZW5pY2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MTY0ODM2MzgyNjEtZjRkYmFmMDM2OTYzP2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4elpXRnlZMmg4TW54OGFYUmhiSGw4Wlc1OE1IeDhNSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NDAwJnE9NjBcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkU2VjdGlvbjogXCIuZ2FsbGVyeV9fY2FyZHNcIixcclxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICBwcmV2aWV3UG9wdXA6IFwiLm1vZGFsX3ByZXZpZXdcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTsiLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjXCIgKyBpbnB1dEVsZW1lbnQuaWQgKyBcIi1lcnJvclwiXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNcIiArIGlucHV0RWxlbWVudC5pZCArIFwiLWVycm9yXCJcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuLy8iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgc2VsZWN0b3JzLFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5cclxuLy8gUE9QVVAgQlVUVE9OU1xyXG4vL2VkaXRcclxuY29uc3Qgb3BlbkVkaXRQb3B1cEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbm9wZW5FZGl0UG9wdXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXIuZ2V0VXNlckluZm8oKTtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0UHJvZmlsZU1vZGFsLm9wZW4oKTtcclxuICBlZGl0UHJvZmlsZU1vZGFsLnNldElucHV0VmFsdWVzKHVzZXJEYXRhKTtcclxufSk7XHJcbi8vYWRkXHJcbmNvbnN0IG9wZW5BZGRQb3B1cEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxub3BlbkFkZFBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuLy9jb25maXJtXHJcbmNvbnN0IG9wZW5Db25maXJtRGVsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbm9wZW5Db25maXJtRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uZmlybURlbGV0ZU1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyBGb3JtIFZhbGlkYXRvclxyXG5jb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1mb3JtXCIpO1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGVkaXRGb3JtKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBhZGRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1tb2RhbFwiKTtcclxuY29uc3QgYWRkRm9ybSA9IGFkZFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1mb3JtXCIpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgYWRkRm9ybSk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gQ2FyZFxyXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEpID0+IHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhLFxyXG4gICAgICBoYW5kbGVJbWFnZUNsaWNrOiAoaW1hZ2VEYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZFByZXZpZXcub3BlbihpbWFnZURhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGVcclxuICApO1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcclxufTtcclxuLy8gU2VjdGlvblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIHNlbGVjdG9ycy5jYXJkU2VjdGlvblxyXG4pO1xyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy8gUG9wdXAgd2l0aCBJbWFnZVxyXG5jb25zdCBjYXJkUHJldmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIjcGljdHVyZS1tb2RhbFwiLFxyXG59KTtcclxuXHJcbi8vIFBvcHVwIHdpdGggZm9ybVxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIjYWRkLW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICByZW5kZXJDYXJkKGlucHV0VmFsdWVzKTtcclxuICAgIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xyXG4gIH0sXHJcbn0pO1xyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2VkaXQtbW9kYWxcIixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICAgIHVzZXIuc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xyXG4gICAgZWRpdFByb2ZpbGVNb2RhbC5jbG9zZSgpO1xyXG4gIH0sXHJcbn0pO1xyXG5jb25zdCBjb25maXJtRGVsZXRlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIjY29uZmlybS1tb2RhbFwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcclxuICAgIGNvbmZpcm1EZWxldGVNb2RhbC5jbG9zZSgpO1xyXG4gIH0sXHJcbn0pO1xyXG5jb25zdCBhdmF0YXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNhdmF0YXItbW9kYWxcIixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICAgIGF2YXRhck1vZGFsLmNsb3NlKGlucHV0VmFsdWVzKTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIFVzZXIgSW5mb1xyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5cclxuLy8gQVBJXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMy1lblwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMzZkNGNjY2UtMTBjMy00ZmQxLThlNjktNjU2OTJjNzY4MTMzXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIC8vIHByb2Nlc3MgdGhlIHJlc3VsdFxyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KTtcclxuXHJcbi8vIFRva2VuOiAzNmQ0Y2NjZS0xMGMzLTRmZDEtOGU2OS02NTY5MmM3NjgxMzNcclxuLy8gR3JvdXAgSUQ6IGNvaG9ydC0zLWVuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGdhbGxlcnlDYXJkcykge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9nYWxsZXJ5Q2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdhbGxlcnlDYXJkcyk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2dhbGxlcnlDYXJkcy5wcmVwZW5kKGl0ZW1FbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9tb2RhbFBpY3R1cmUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcGljdHVyZVwiKTtcclxuICAgIHRoaXMuX21vZGFsUGljdHVyZURlc2NyaXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19waWN0dXJlLWRlc2NyaXB0aW9uXCJcclxuICAgICk7XHJcbiAgfVxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgdGhpcy5fbW9kYWxQaWN0dXJlLnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX21vZGFsUGljdHVyZS5hbHQgPSBgUGhvdG8gb2YgJHtkYXRhLm5hbWV9YDtcclxuICAgIHRoaXMuX21vZGFsUGljdHVyZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWUsIHVzZXJKb2IpIHtcclxuICAgIHRoaXMudXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lKTtcclxuICAgIHRoaXMudXNlckpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlck5hbWU6IHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIHVzZXJKb2I6IHRoaXMudXNlckpvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKHsgdXNlckpvYiwgdXNlck5hbWUgfSkge1xyXG4gICAgdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy51c2VySm9iLnRleHRDb250ZW50ID0gdXNlckpvYjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJ0ZXh0IiwiX3RleHQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJtb2RhbFBpY3R1cmUiLCJzcmMiLCJhbHQiLCJtb2RhbFBpY3R1cmVEZXNjcmlwdGlvbiIsInRleHRDb250ZW50Iiwib3BlbiIsInBpY3R1cmVNb2RhbCIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwiYWRkIiwiX2hhbmRsZUVzY2FwZUNsb3NlIiwiX2hhbmRsZUNsaWNrQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVTdWJtaXQiLCJiaW5kIiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm0iLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsIl9oaWRlSW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImRpc2FibGVCdXR0b24iLCJyZXNldFZhbGlkYXRpb24iLCJ1c2VyRGF0YSIsInVzZXIiLCJnZXRVc2VySW5mbyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiZWRpdFByb2ZpbGVNb2RhbCIsImFkZEZvcm1WYWxpZGF0b3IiLCJuZXdDYXJkUG9wdXAiLCJjb25maXJtRGVsZXRlTW9kYWwiLCJGb3JtVmFsaWRhdG9yIiwicmVuZGVyQ2FyZCIsIm5ld0NhcmQiLCJpbWFnZURhdGEiLCJjYXJkUHJldmlldyIsImNhcmRTZWN0aW9uIiwiYWRkSXRlbSIsImdhbGxlcnlDYXJkcyIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfaXRlbXMiLCJfZ2FsbGVyeUNhcmRzIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiaXRlbUVsZW1lbnQiLCJwcmVwZW5kIiwiX21vZGFsUGljdHVyZSIsIl9tb2RhbFBpY3R1cmVEZXNjcmlwdGlvbiIsImlucHV0VmFsdWVzIiwic2V0VXNlckluZm8iLCJhdmF0YXJNb2RhbCIsInVzZXJOYW1lIiwidXNlckpvYiIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImdldEluaXRpYWxDYXJkcyIsInRoZW4iLCJyZXN1bHQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=