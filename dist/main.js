!function(){"use strict";var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}};function e(t){t.classList.remove("modal_opened"),document.removeEventListener("keydown",r),t.removeEventListener("mousedown",o)}function n(t){t.classList.add("modal_opened"),document.addEventListener("keydown",r),t.addEventListener("mousedown",o)}function r(t){"Escape"===t.key&&e(document.querySelector(".modal_opened"))}function o(t){t.target===t.currentTarget&&e(t.target)}t.d({},{yl:function(){return a},PK:function(){return c},Yr:function(){return l}});class i{constructor(t,e){let{name:n,link:r}=t;this._name=n,this._link=r,this._cardSelector=e}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick()}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_clicked")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_handleCardClick(){a.src=this._link,a.alt=`Photo of ${this._name}`,c.textContent=this._name,n(l)}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement}}var s=class{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e}_checkInputValidity(t){if(!t.validity.valid)return this._showInputError(t);this._hideInputError(t)}_showInputError(t){const e=this._form.querySelector("#"+t.id+"-error");t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector("#"+t.id+"-error");t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return!this._inputElements.every((t=>t.validity.valid))}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._inputElements.forEach((t=>{t.addEventListener("input",(e=>{this._checkInputValidity(t),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}};const l=document.querySelector("#picture-modal"),a=document.querySelector(".modal__picture"),c=document.querySelector(".modal__picture-description"),u=document.querySelector("#edit-modal"),d=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__title"),m=document.querySelector(".profile__description"),h=document.querySelector(".gallery__cards"),f=u.querySelector("#name-input"),p=u.querySelector("#description-input"),y=u.querySelector(".modal__close-button"),b=document.querySelector("#add-modal"),v=(b.querySelector(".modal__button"),document.querySelector(".profile__add-button")),S=b.querySelector(".modal__close-button"),E=b.querySelector("#add-form"),x=document.querySelector("#title-input"),q=document.querySelector("#image-input"),B=l.querySelector(".modal__close-button"),w={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},k=new s(w,document.querySelector("#edit-form"));k.enableValidation();const g=new s(w,E);g.enableValidation(),B.addEventListener("click",(()=>e(l))),y.addEventListener("click",(()=>e(u))),d.addEventListener("click",(function(){f.value=_.textContent,p.value=m.textContent,n(u)})),u.addEventListener("submit",(t=>{t.preventDefault(),m.textContent=p.value,_.textContent=f.value,e(u),k.toggleButtonState()})),S.addEventListener("click",(()=>e(b))),v.addEventListener("click",(function(){n(b)})),b.addEventListener("submit",(t=>{t.preventDefault();const n={name:x.value,link:q.value};L(n,h),e(b),E.reset(),g.toggleButtonState()}));const L=(t,e)=>{const n=new i(t,"#card-template");e.prepend(n.getView())};[{name:"Tokyo",link:"https://images.unsplash.com/photo-1678951310861-60299f9b0162?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Golden Gate Bridge",link:"https://images.unsplash.com/photo-1603389865219-669a0768193e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Pleasure Pier TX",link:"https://images.unsplash.com/photo-1598805291186-612c3ca482a6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8cGxlYXN1cmUlMjBwaWVyfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=400&q=60"},{name:"Oceanside CA",link:"https://images.unsplash.com/photo-1528521712081-0480efff6665?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Yellowstone National Park",link:"https://images.unsplash.com/photo-1586968332704-0160550f3ec1?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTV8fHllbGxvd3N0b25lJTIwbmF0aW9uYWwlMjBwYXJrfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=400&q=60"},{name:"Venice",link:"https://images.unsplash.com/photo-1516483638261-f4dbaf036963?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8aXRhbHl8ZW58MHx8MHx8&auto=format&fit=crop&w=400&q=60"}].forEach((t=>{L(t,h)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cERBLEVBQU10QixpQkFDTkksRUFBbUJ6QyxZQUFjNEMsRUFBaUJjLE1BQ2xEbEIsRUFBYXhDLFlBQWMyQyxFQUFVZSxNQUNyQzdGLEVBQVd5RSxHQUNYaUIsRUFBa0IzQixtQkFBbUIsSUFJdkNvQixFQUFlekUsaUJBQWlCLFNBQVMsSUFBTVYsRUFBV2lGLEtBQzFEQyxFQUFpQnhFLGlCQUFpQixTQUFTLFdBQ3pDRixFQUFVeUUsRUFDWixJQUNBQSxFQUFnQnZFLGlCQUFpQixVQUFXb0YsSUFDMUNBLEVBQU10QixpQkFDTixNQUFNdUIsRUFBVyxDQUNmNUUsS0FBTWtFLEVBQVdRLE1BQ2pCekUsS0FBTWtFLEVBQVdPLE9BR25CRyxFQUFXRCxFQUFVbEIsR0FDckI3RSxFQUFXaUYsR0FDWEcsRUFBUWEsUUFDUkwsRUFBaUI3QixtQkFBbUIsSUFJdEMsTUFBTWlDLEVBQWFBLENBQUNFLEVBQU1yQixLQUN4QixNQUFNc0IsRUFBTyxJQUFJcEYsRUFBS21GLEVBQU0sa0JBQzVCckIsRUFBWXVCLFFBQVFELEVBQUszRCxVQUFVLEVBNUdoQixDQUNuQixDQUNFckIsS0FBTSxRQUNOQyxLQUFNLGlLQUVSLENBQ0VELEtBQU0scUJBQ05DLEtBQU0saUtBRVIsQ0FDRUQsS0FBTSxtQkFDTkMsS0FBTSx5TEFFUixDQUNFRCxLQUFNLGVBQ05DLEtBQU0saUtBRVIsQ0FDRUQsS0FBTSw0QkFDTkMsS0FBTSw2TUFFUixDQUNFRCxLQUFNLFNBQ05DLEtBQU0sc0tBd0ZHa0QsU0FBU3lCLElBQ3BCQyxFQUFXRCxFQUFVbEIsRUFBWSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3ByYWN0aWN1bS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3NjcmlwdHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3NjcmlwdHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvc2NyaXB0cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9zY3JpcHRzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJleHBvcnQgZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VNb2RhbEJ5RXNjYXBlKTtcclxuICBtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGNsb3NlTW9kYWxPblJlbW90ZUNsaWNrKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgY2xvc2VNb2RhbEJ5RXNjYXBlKTtcclxuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGNsb3NlTW9kYWxPblJlbW90ZUNsaWNrKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlTW9kYWxCeUVzY2FwZShldnQpIHtcclxuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgY29uc3Qgb3BlbmVkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGNsb3NlTW9kYWwob3BlbmVkTW9kYWwpO1xyXG4gIH1cclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VNb2RhbE9uUmVtb3RlQ2xpY2soZXZ0KSB7XHJcbiAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICBjbG9zZU1vZGFsKGV2dC50YXJnZXQpO1xyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgb3Blbk1vZGFsIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgcGljdHVyZU1vZGFsLFxyXG4gIG1vZGFsUGljdHVyZSxcclxuICBtb2RhbFBpY3R1cmVEZXNjcmlwdGlvbixcclxufSBmcm9tIFwiLi9pbmRleC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKTtcclxuICAgICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2NsaWNrZWRcIik7XHJcbiAgfVxyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVDYXJkQ2xpY2soKSB7XHJcbiAgICBtb2RhbFBpY3R1cmUuc3JjID0gdGhpcy5fbGluaztcclxuICAgIG1vZGFsUGljdHVyZS5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICBtb2RhbFBpY3R1cmVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBvcGVuTW9kYWwocGljdHVyZU1vZGFsKTtcclxuICB9XHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjXCIgKyBpbnB1dEVsZW1lbnQuaWQgKyBcIi1lcnJvclwiXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNcIiArIGlucHV0RWxlbWVudC5pZCArIFwiLWVycm9yXCJcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgb3Blbk1vZGFsLCBjbG9zZU1vZGFsIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJUb2t5b1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTY3ODk1MTMxMDg2MS02MDI5OWY5YjAxNjI/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY4NyZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkdvbGRlbiBHYXRlIEJyaWRnZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwMzM4OTg2NTIxOS02NjlhMDc2ODE5M2U/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY4NyZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlBsZWFzdXJlIFBpZXIgVFhcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTg4MDUyOTExODYtNjEyYzNjYTQ4MmE2P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4elpXRnlZMmg4T0h4OGNHeGxZWE4xY21VbE1qQndhV1Z5ZkdWdWZEQjhmREI4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz00MDAmcT02MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJPY2VhbnNpZGUgQ0FcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1Mjg1MjE3MTIwODEtMDQ4MGVmZmY2NjY1P2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02ODcmcT04MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJZZWxsb3dzdG9uZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTg2OTY4MzMyNzA0LTAxNjA1NTBmM2VjMT9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHpaV0Z5WTJoOE1UVjhmSGxsYkd4dmQzTjBiMjVsSlRJd2JtRjBhVzl1WVd3bE1qQndZWEpyZkdWdWZEQjhmREI4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz00MDAmcT02MFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWZW5pY2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MTY0ODM2MzgyNjEtZjRkYmFmMDM2OTYzP2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4elpXRnlZMmg4TW54OGFYUmhiSGw4Wlc1OE1IeDhNSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9NDAwJnE9NjBcIixcclxuICB9LFxyXG5dO1xyXG5cclxuLy8gVmFyaXJhYmxlc1xyXG5leHBvcnQgY29uc3QgcGljdHVyZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwaWN0dXJlLW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgbW9kYWxQaWN0dXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fcGljdHVyZVwiKTtcclxuZXhwb3J0IGNvbnN0IG1vZGFsUGljdHVyZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fcGljdHVyZS1kZXNjcmlwdGlvblwiXHJcbik7XHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XHJcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgY2FyZEdhbGxlcnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdhbGxlcnlfX2NhcmRzXCIpO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKTtcclxuY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9XHJcbiAgZWRpdFByb2ZpbGVNb2RhbENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uLWlucHV0XCIpO1xyXG5jb25zdCBlZGl0Q2xvc2VCdXR0b24gPSBlZGl0UHJvZmlsZU1vZGFsQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbik7XHJcbmNvbnN0IGFkZFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLW1vZGFsXCIpO1xyXG5jb25zdCBhZGRTdWJtaXRCdXR0b24gPSBhZGRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG5jb25zdCBhZGRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBhZGRDbG9zZUJ1dHRvbiA9IGFkZFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XHJcbmNvbnN0IGFkZEZvcm0gPSBhZGRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtZm9ybVwiKTtcclxuY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IGltYWdlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLWlucHV0XCIpO1xyXG5cclxuY29uc3QgcGljdHVyZUNsb3NlQnV0dG9uID0gcGljdHVyZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5jb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1mb3JtXCIpO1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGVkaXRGb3JtKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgYWRkRm9ybSk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxucGljdHVyZUNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKHBpY3R1cmVNb2RhbCkpO1xyXG5cclxuLy8gRWRpdCBNb2RhbFxyXG5lZGl0Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsQ29udGFpbmVyKVxyXG4pO1xyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudDtcclxuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xyXG4gIG9wZW5Nb2RhbChlZGl0UHJvZmlsZU1vZGFsQ29udGFpbmVyKTtcclxufSk7XHJcbmVkaXRQcm9maWxlTW9kYWxDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uSW5wdXQudmFsdWU7XHJcbiAgcHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID0gbmFtZUlucHV0LnZhbHVlO1xyXG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbENvbnRhaW5lcik7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxufSk7XHJcblxyXG4vLyBBZGQgTW9kYWxcclxuYWRkQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlTW9kYWwoYWRkUHJvZmlsZU1vZGFsKSk7XHJcbmFkZFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBvcGVuTW9kYWwoYWRkUHJvZmlsZU1vZGFsKTtcclxufSk7XHJcbmFkZFByb2ZpbGVNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgY2FyZERhdGEgPSB7XHJcbiAgICBuYW1lOiB0aXRsZUlucHV0LnZhbHVlLFxyXG4gICAgbGluazogaW1hZ2VJbnB1dC52YWx1ZSxcclxuICB9O1xyXG5cclxuICByZW5kZXJDYXJkKGNhcmREYXRhLCBjYXJkR2FsbGVyeSk7XHJcbiAgY2xvc2VNb2RhbChhZGRQcm9maWxlTW9kYWwpO1xyXG4gIGFkZEZvcm0ucmVzZXQoKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuLy8gQXJyYXkgRGF0YVxyXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEsIGNhcmRHYWxsZXJ5KSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIik7XHJcbiAgY2FyZEdhbGxlcnkucHJlcGVuZChjYXJkLmdldFZpZXcoKSk7XHJcbn07XHJcblxyXG5pbml0aWFsQ2FyZHMuZm9yRWFjaCgoY2FyZERhdGEpID0+IHtcclxuICByZW5kZXJDYXJkKGNhcmREYXRhLCBjYXJkR2FsbGVyeSk7XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJjbG9zZU1vZGFsIiwibW9kYWwiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJkb2N1bWVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZU1vZGFsQnlFc2NhcGUiLCJjbG9zZU1vZGFsT25SZW1vdGVDbGljayIsIm9wZW5Nb2RhbCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJxdWVyeVNlbGVjdG9yIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRWxlbWVudCIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfaGFuZGxlQ2FyZENsaWNrIiwidG9nZ2xlIiwibW9kYWxQaWN0dXJlIiwic3JjIiwiYWx0IiwibW9kYWxQaWN0dXJlRGVzY3JpcHRpb24iLCJ0ZXh0Q29udGVudCIsInBpY3R1cmVNb2RhbCIsIl9nZXRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3Iiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJfaGlkZUlucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2VFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9pbnB1dEVsZW1lbnRzIiwiZXZlcnkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImVkaXRQcm9maWxlTW9kYWxDb250YWluZXIiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImNhcmRHYWxsZXJ5IiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsImVkaXRDbG9zZUJ1dHRvbiIsImFkZFByb2ZpbGVNb2RhbCIsImFkZFByb2ZpbGVCdXR0b24iLCJhZGRDbG9zZUJ1dHRvbiIsImFkZEZvcm0iLCJ0aXRsZUlucHV0IiwiaW1hZ2VJbnB1dCIsInBpY3R1cmVDbG9zZUJ1dHRvbiIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwidmFsdWUiLCJldmVudCIsImNhcmREYXRhIiwicmVuZGVyQ2FyZCIsInJlc2V0IiwiZGF0YSIsImNhcmQiLCJwcmVwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==