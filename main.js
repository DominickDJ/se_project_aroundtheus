!function(){"use strict";class e{constructor(e,t){let{data:s,userId:r,handleImageClick:i,deleteCard:n,handleDeleteClick:o,handleLikeCard:a,handleConfirm:l}=e;this.handleConfirm=l,this._name=s.name,this._link=s.link,this._cardSelector=t,this._handleImageClick=i,this._handleDeleteClick=o,this._handleLikeCard=a,this._id=s._id,this._userId=r,this._deleteCard=n,this._likes=s.likes,this._owner=s.owner}getId(){return this._id}isLiked(){return this._likes.some((e=>e._id===this._userId))}setLikes(e){this._likes=e,this._renderLikes()}_renderLikes(){this._likesAmount=this._cardElement.querySelector(".card__like-number"),this._likesAmount.textContent=this._likes.length,this.isLiked()?this._cardElement.querySelector(".card__like-button").classList.add("card__like-button_clicked"):this._cardElement.querySelector(".card__like-button").classList.remove("card__like-button_clicked")}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeCard(this._id)})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteClick(this.getId())})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({link:this._link,text:this._text})}))}_handleImageClick(){modalPicture.src=this._link,modalPicture.alt=`Photo of ${this._name}`,modalPictureDescription.textContent=this._name,open(pictureModal)}_hideDeleteIcon(){this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._userId!==this._owner._id&&this._deleteButton.classList.add("card__delete-button-hidden")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._hideDeleteIcon(),this._renderLikes(),this._cardElement}remove(){this._cardElement.remove(),this._cardElement=null}}class t{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose),this._closeButton.addEventListener("click",this._handleClickClose),this._popupElement.addEventListener("mousedown",this._handleClickClose)}close(){document.removeEventListener("keydown",this._handleEscapeClose),this._popupElement.removeEventListener("mousedown",this._handleClickClose),this._popupElement.classList.remove("modal_opened"),this._closeButton.removeEventListener("click",this._handleClickClose)}_handleClickClose=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()};_handleEscapeClose=e=>{"Escape"===e.key&&this.close()}}class s extends t{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupElement.querySelectorAll(".modal__input"),this._handleFormSubmit=s,this._handleSubmit=this._handleSubmit.bind(this),this._submitBtn=this._popupElement.querySelector(".modal__button"),this._submitBtnText=this._submitBtn.textContent}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}_handleSubmit(){this._handleFormSubmit(this._getInputValues())}open(){this._popupForm.addEventListener("submit",this._handleSubmit),super.open()}close(){this._popupForm.removeEventListener("submit",this._handleSubmit),this._popupForm.reset(),super.close()}}class r{constructor(e,t){let{items:s,renderer:r}=e;this._renderer=r,this._items=s,this._galleryCards=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._galleryCards.prepend(e)}}const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};var n=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_showInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}resetValidation(){this._form.reset(),this.disableButton()}};const o=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>this._checkServerResponse(e)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>this._checkServerResponse(e)))}changeUserInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((e=>this._checkServerResponse(e)))}setAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then((e=>this._checkServerResponse(e)))}addCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((e=>this._checkServerResponse(e)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>this._checkServerResponse(e)))}changeLikeNumber(e,t){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:t?"DELETE":"PUT",headers:this._headers}).then((e=>this._checkServerResponse(e)))}_checkServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"36d4ccce-10c3-4fd1-8e69-65692c768133","Content-Type":"application/json"}});document.querySelector(".profile__edit-button").addEventListener("click",(()=>{const e=c.getUserInfo();a.resetValidation(),S.open(),S.setInputValues(e)})),document.querySelector(".profile__add-button").addEventListener("click",(()=>{l.resetValidation(),p.open()})),document.querySelector(".profile__image-edit").addEventListener("click",(()=>{d.resetValidation(),b.open()}));const a=new n(i,document.querySelector("#edit-form"));a.enableValidation();const l=new n(i,document.querySelector("#add-modal").querySelector("#add-form"));l.enableValidation();const d=new n(i,document.querySelector("#avatar-form"));d.enableValidation();const c=new class{constructor(e,t,s){this.userName=document.querySelector(e),this.userJob=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{userName:this.userName.textContent,userJob:this.userJob.textContent}}setUserInfo(e){let{about:t,name:s}=e;this.userName.textContent=s,this.userJob.textContent=t}setAvatar(e){this._avatar.src=e}}(".profile__title",".profile__description",".profile__image");let h,u;Promise.all([o.getUserInfo(),o.getInitialCards()]).then((e=>{let[t,s]=e;const{name:i,about:n,avatar:o}=t;c.setUserInfo({name:i,about:n}),c.setAvatar(o),h=t._id,u=new r({items:s,renderer:_},".gallery__cards"),u.renderItems()})).catch((e=>{console.error(e)}));const _=t=>{const s=new e({data:t,userId:h,handleImageClick:e=>{m.open(e)},handleDeleteClick:()=>{k.open(),k.setSubmitAction((()=>{o.deleteCard(t._id).then((e=>{s.remove(e),k.close()})).catch((e=>{console.error(e)}))}))},handleLikeCard:e=>{const t=s.isLiked();o.changeLikeNumber(e,t).then((e=>{s.setLikes(e.likes)})).catch((e=>{console.error(e)}))}},"#card-template"),r=s.getView();u.addItem(r)},m=new class extends t{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._modalPicture=this._popupElement.querySelector(".modal__picture"),this._modalPictureDescription=this._popupElement.querySelector(".modal__picture-description")}open(e){this._modalPicture.src=e.link,this._modalPicture.alt=`Photo of ${e.name}`,this._modalPictureDescription.textContent=e.name,super.open()}}({popupSelector:"#picture-modal"}),p=new s({popupSelector:"#add-modal",handleFormSubmit:e=>{p.renderLoading(!0),o.addCard(e.name,e.link).then((e=>{p.renderLoading(!1),p.close(),_(e)})).catch((e=>{console.error(e)}))}}),S=new s({popupSelector:"#edit-modal",handleFormSubmit:e=>{S.renderLoading(!0),o.changeUserInfo(e.userName,e.userJob).then((e=>{S.renderLoading(!1),S.close(),c.setUserInfo(e)})).catch((e=>{console.error(e)}))}}),b=new s({popupSelector:"#avatar-modal",handleFormSubmit:e=>{b.renderLoading(!0),o.setAvatar(e).then((e=>{b.renderLoading(!1),c.setAvatar(e.avatar),b.close()})).catch((e=>{console.error(e)}))}}),k=new class extends t{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._handleFormSubmit=s,this._confirmDeleteButton=this._popupElement.querySelector("#confirm-button"),this._confirmForm=this._popupElement.querySelector("#confirm-form"),this._setHandlers()}_setHandlers(){this._confirmForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setSubmitAction(e){this._handleFormSubmit=e}}({popupSelector:"#confirm-modal",handleFormSubmit:e=>{o.deleteCard(e).then((()=>{k.close()})).catch((e=>{console.error(e)}))}})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQWUsTUFBTUEsRUFDbkJDLFlBQVdDLEVBVVRDLEdBQ0EsSUFWQSxLQUNFQyxFQUFJLE9BQ0pDLEVBQU0saUJBQ05DLEVBQWdCLFdBQ2hCQyxFQUFVLGtCQUNWQyxFQUFpQixlQUNqQkMsRUFBYyxjQUNkQyxHQUNEUixFQUdEUyxLQUFLRCxjQUFnQkEsRUFDckJDLEtBQUtDLE1BQVFSLEVBQUtTLEtBQ2xCRixLQUFLRyxNQUFRVixFQUFLVyxLQUNsQkosS0FBS0ssY0FBZ0JiLEVBQ3JCUSxLQUFLTSxrQkFBb0JYLEVBQ3pCSyxLQUFLTyxtQkFBcUJWLEVBQzFCRyxLQUFLUSxnQkFBa0JWLEVBQ3ZCRSxLQUFLUyxJQUFNaEIsRUFBS2dCLElBQ2hCVCxLQUFLVSxRQUFVaEIsRUFDZk0sS0FBS1csWUFBY2YsRUFDbkJJLEtBQUtZLE9BQVNuQixFQUFLb0IsTUFDbkJiLEtBQUtjLE9BQVNyQixFQUFLc0IsS0FDckIsQ0FFQUMsUUFDRSxPQUFPaEIsS0FBS1MsR0FDZCxDQUVBUSxVQUNFLE9BQU9qQixLQUFLWSxPQUFPTSxNQUFNQyxHQUFTQSxFQUFLVixNQUFRVCxLQUFLVSxTQUN0RCxDQUNBVSxTQUFTUCxHQUNQYixLQUFLWSxPQUFTQyxFQUNkYixLQUFLcUIsY0FDUCxDQUNBQSxlQUNFckIsS0FBS3NCLGFBQWV0QixLQUFLdUIsYUFBYUMsY0FBYyxzQkFDcER4QixLQUFLc0IsYUFBYUcsWUFBY3pCLEtBQUtZLE9BQU9jLE9BQ3hDMUIsS0FBS2lCLFVBQ1BqQixLQUFLdUIsYUFDRkMsY0FBYyxzQkFDZEcsVUFBVUMsSUFBSSw2QkFFakI1QixLQUFLdUIsYUFDRkMsY0FBYyxzQkFDZEcsVUFBVUUsT0FBTyw0QkFFeEIsQ0FFQUMscUJBQ0U5QixLQUFLdUIsYUFDRkMsY0FBYyxzQkFDZE8saUJBQWlCLFNBQVMsS0FDekIvQixLQUFLUSxnQkFBZ0JSLEtBQUtTLElBQUksSUFFbENULEtBQUt1QixhQUNGQyxjQUFjLHdCQUNkTyxpQkFBaUIsU0FBUyxLQUN6Qi9CLEtBQUtPLG1CQUFtQlAsS0FBS2dCLFFBQVEsSUFFekNoQixLQUFLdUIsYUFDRkMsY0FBYyxnQkFDZE8saUJBQWlCLFNBQVMsS0FDekIvQixLQUFLTSxrQkFBa0IsQ0FBRUYsS0FBTUosS0FBS0csTUFBTzZCLEtBQU1oQyxLQUFLaUMsT0FBUSxHQUVwRSxDQUdBM0Isb0JBQ0U0QixhQUFhQyxJQUFNbkMsS0FBS0csTUFDeEIrQixhQUFhRSxJQUFPLFlBQVdwQyxLQUFLQyxRQUNwQ29DLHdCQUF3QlosWUFBY3pCLEtBQUtDLE1BQzNDcUMsS0FBS0MsYUFDUCxDQUVBQyxrQkFDRXhDLEtBQUt5QyxjQUFnQnpDLEtBQUt1QixhQUFhQyxjQUNyQyx3QkFHRXhCLEtBQUtVLFVBQVlWLEtBQUtjLE9BQU9MLEtBQy9CVCxLQUFLeUMsY0FBY2QsVUFBVUMsSUFBSSw2QkFFckMsQ0FDQWMsZUFDRSxPQUFPQyxTQUNKbkIsY0FBY3hCLEtBQUtLLGVBQ25CdUMsUUFBUXBCLGNBQWMsU0FDdEJxQixXQUFVLEVBQ2YsQ0FFQUMsVUFRRSxPQVBBOUMsS0FBS3VCLGFBQWV2QixLQUFLMEMsZUFDekIxQyxLQUFLOEIscUJBQ0w5QixLQUFLdUIsYUFBYUMsY0FBYyxnQkFBZ0JXLElBQU1uQyxLQUFLRyxNQUMzREgsS0FBS3VCLGFBQWFDLGNBQWMsZ0JBQWdCWSxJQUFNcEMsS0FBS0MsTUFDM0RELEtBQUt1QixhQUFhQyxjQUFjLGdCQUFnQkMsWUFBY3pCLEtBQUtDLE1BQ25FRCxLQUFLd0Msa0JBQ0x4QyxLQUFLcUIsZUFDRXJCLEtBQUt1QixZQUNkLENBRUFNLFNBQ0U3QixLQUFLdUIsYUFBYU0sU0FDbEI3QixLQUFLdUIsYUFBZSxJQUN0QixFQzVHYSxNQUFNd0IsRUFDbkJ6RCxZQUFXQyxHQUFvQixJQUFuQixjQUFFeUQsR0FBZXpELEVBQzNCUyxLQUFLaUQsY0FBZ0JOLFNBQVNuQixjQUFjd0IsR0FDNUNoRCxLQUFLa0QsYUFBZWxELEtBQUtpRCxjQUFjekIsY0FDckMsdUJBRUosQ0FDQWMsT0FDRXRDLEtBQUtpRCxjQUFjdEIsVUFBVUMsSUFBSSxnQkFDakNlLFNBQVNaLGlCQUFpQixVQUFXL0IsS0FBS21ELG9CQUMxQ25ELEtBQUtrRCxhQUFhbkIsaUJBQWlCLFFBQVMvQixLQUFLb0QsbUJBQ2pEcEQsS0FBS2lELGNBQWNsQixpQkFBaUIsWUFBYS9CLEtBQUtvRCxrQkFDeEQsQ0FDQUMsUUFDRVYsU0FBU1csb0JBQW9CLFVBQVd0RCxLQUFLbUQsb0JBQzdDbkQsS0FBS2lELGNBQWNLLG9CQUFvQixZQUFhdEQsS0FBS29ELG1CQUN6RHBELEtBQUtpRCxjQUFjdEIsVUFBVUUsT0FBTyxnQkFDcEM3QixLQUFLa0QsYUFBYUksb0JBQW9CLFFBQVN0RCxLQUFLb0Qsa0JBQ3RELENBQ0FBLGtCQUFxQkcsS0FFakJBLEVBQUlDLE9BQU83QixVQUFVOEIsU0FBUyxpQkFDOUJGLEVBQUlDLE9BQU83QixVQUFVOEIsU0FBUyx5QkFFOUJ6RCxLQUFLcUQsT0FDUCxFQUdGRixtQkFBc0JJLElBQ0osV0FBWkEsRUFBSUcsS0FDTjFELEtBQUtxRCxPQUNQLEVDOUJXLE1BQU1NLFVBQXNCWixFQUN6Q3pELFlBQVdDLEdBQXNDLElBQXJDLGNBQUV5RCxFQUFhLGlCQUFFWSxHQUFrQnJFLEVBQzdDc0UsTUFBTSxDQUFFYixrQkFDUmhELEtBQUs4RCxXQUFhOUQsS0FBS2lELGNBQWN6QixjQUFjLGdCQUNuRHhCLEtBQUsrRCxXQUFhL0QsS0FBS2lELGNBQWNlLGlCQUFpQixpQkFDdERoRSxLQUFLaUUsa0JBQW9CTCxFQUN6QjVELEtBQUtrRSxjQUFnQmxFLEtBQUtrRSxjQUFjQyxLQUFLbkUsTUFDN0NBLEtBQUtvRSxXQUFhcEUsS0FBS2lELGNBQWN6QixjQUFjLGtCQUNuRHhCLEtBQUtxRSxlQUFpQnJFLEtBQUtvRSxXQUFXM0MsV0FDeEMsQ0FFQTZDLGNBQWNDLEdBQXNDLElBQTNCQyxFQUFXQyxVQUFBL0MsT0FBQSxRQUFBZ0QsSUFBQUQsVUFBQSxHQUFBQSxVQUFBLEdBQUcsWUFFbkN6RSxLQUFLb0UsV0FBVzNDLFlBRGQ4QyxFQUM0QkMsRUFFQXhFLEtBQUtxRSxjQUV2QyxDQUNBTSxrQkFDRSxNQUFNQyxFQUFhLENBQUMsRUFJcEIsT0FIQTVFLEtBQUsrRCxXQUFXYyxTQUFTQyxJQUN2QkYsRUFBV0UsRUFBTTVFLE1BQVE0RSxFQUFNQyxLQUFLLElBRS9CSCxDQUNULENBQ0FJLGVBQWV2RixHQUNiTyxLQUFLK0QsV0FBV2MsU0FBU0MsSUFDdkJBLEVBQU1DLE1BQVF0RixFQUFLcUYsRUFBTTVFLEtBQUssR0FFbEMsQ0FFQWdFLGdCQUNFbEUsS0FBS2lFLGtCQUFrQmpFLEtBQUsyRSxrQkFDOUIsQ0FFQXJDLE9BQ0V0QyxLQUFLOEQsV0FBVy9CLGlCQUFpQixTQUFVL0IsS0FBS2tFLGVBQ2hETCxNQUFNdkIsTUFDUixDQUNBZSxRQUNFckQsS0FBSzhELFdBQVdSLG9CQUFvQixTQUFVdEQsS0FBS2tFLGVBQ25EbEUsS0FBSzhELFdBQVdtQixRQUNoQnBCLE1BQU1SLE9BQ1IsRUM1Q2EsTUFBTTZCLEVBQ25CNUYsWUFBV0MsRUFBc0I0RixHQUFjLElBQW5DLE1BQUVDLEVBQUssU0FBRUMsR0FBVTlGLEVBQzdCUyxLQUFLc0YsVUFBWUQsRUFDakJyRixLQUFLdUYsT0FBU0gsRUFDZHBGLEtBQUt3RixjQUFnQjdDLFNBQVNuQixjQUFjMkQsRUFDOUMsQ0FFQU0sY0FDRXpGLEtBQUt1RixPQUFPVixTQUFTYSxJQUNuQjFGLEtBQUtzRixVQUFVSSxFQUFLLEdBRXhCLENBRUFDLFFBQVFDLEdBQ041RixLQUFLd0YsY0FBY0ssUUFBUUQsRUFDN0IsRUNmSyxNQU1NRSxFQUFtQixDQUM5QkMsYUFBYyxlQUNkQyxjQUFlLGdCQUNmQyxxQkFBc0IsaUJBQ3RCQyxvQkFBcUIseUJBQ3JCQyxnQkFBaUIsMEJBQ2pCQyxXQUFZLHdCQzhEZCxNQTFFQSxNQUNFOUcsWUFBWStHLEVBQVVDLEdBQ3BCdEcsS0FBS3VHLGVBQWlCRixFQUFTTCxjQUMvQmhHLEtBQUt3RyxzQkFBd0JILEVBQVNKLHFCQUN0Q2pHLEtBQUt5RyxxQkFBdUJKLEVBQVNILG9CQUNyQ2xHLEtBQUswRyxpQkFBbUJMLEVBQVNGLGdCQUNqQ25HLEtBQUsyRyxZQUFjTixFQUFTRCxXQUM1QnBHLEtBQUs0RyxNQUFRTixDQUNmLENBRUFPLG9CQUFvQkMsR0FDbEIsSUFBS0EsRUFBYUMsU0FBU0MsTUFDekIsT0FBT2hILEtBQUtpSCxnQkFBZ0JILEdBRTlCOUcsS0FBS2tILGdCQUFnQkosRUFDdkIsQ0FFQUcsZ0JBQWdCSCxHQUNkLE1BQU1LLEVBQXNCbkgsS0FBSzRHLE1BQU1wRixjQUNyQyxJQUFNc0YsRUFBYU0sR0FBSyxVQUUxQk4sRUFBYW5GLFVBQVVDLElBQUk1QixLQUFLMEcsa0JBQ2hDUyxFQUFvQjFGLFlBQWNxRixFQUFhTyxrQkFDL0NGLEVBQW9CeEYsVUFBVUMsSUFBSTVCLEtBQUsyRyxZQUN6QyxDQUVBTyxnQkFBZ0JKLEdBQ2QsTUFBTUssRUFBc0JuSCxLQUFLNEcsTUFBTXBGLGNBQ3JDLElBQU1zRixFQUFhTSxHQUFLLFVBRTFCTixFQUFhbkYsVUFBVUUsT0FBTzdCLEtBQUswRyxrQkFDbkNTLEVBQW9CMUYsWUFBYyxHQUNsQzBGLEVBQW9CeEYsVUFBVUUsT0FBTzdCLEtBQUsyRyxZQUM1QyxDQUNBVyxvQkFDTXRILEtBQUt1SCxtQkFDUHZILEtBQUt3SCxpQkFHUHhILEtBQUt5SCxjQUFjOUYsVUFBVUUsT0FBTzdCLEtBQUt5RyxzQkFDekN6RyxLQUFLeUgsY0FBY0MsVUFBVyxFQUNoQyxDQUVBSCxtQkFDRSxPQUFRdkgsS0FBSzJILGVBQWVDLE9BQ3pCZCxHQUFpQkEsRUFBYUMsU0FBU0MsT0FFNUMsQ0FDQWxGLHFCQUNFOUIsS0FBSzJILGVBQWlCLElBQUkzSCxLQUFLNEcsTUFBTTVDLGlCQUFpQmhFLEtBQUt1RyxpQkFDM0R2RyxLQUFLeUgsY0FBZ0J6SCxLQUFLNEcsTUFBTXBGLGNBQWN4QixLQUFLd0csdUJBQ25EeEcsS0FBSzJILGVBQWU5QyxTQUFTaUMsSUFDM0JBLEVBQWEvRSxpQkFBaUIsU0FBVXdCLElBQ3RDdkQsS0FBSzZHLG9CQUFvQkMsR0FDekI5RyxLQUFLc0gsbUJBQW1CLEdBQ3hCLEdBRU4sQ0FDQU8sbUJBQ0U3SCxLQUFLNEcsTUFBTTdFLGlCQUFpQixVQUFXd0IsSUFDckNBLEVBQUl1RSxnQkFBZ0IsSUFFdEI5SCxLQUFLOEIsb0JBQ1AsQ0FDQTBGLGdCQUNFeEgsS0FBS3lILGNBQWM5RixVQUFVQyxJQUFJNUIsS0FBS3lHLHNCQUN0Q3pHLEtBQUt5SCxjQUFjQyxVQUFXLENBQ2hDLENBQ0FLLGtCQUNFL0gsS0FBSzRHLE1BQU0zQixRQUNYakYsS0FBS3dILGVBQ1AsR0MzREYsTUFBTVEsRUFBTSxJQ1pHLE1BQ2IxSSxZQUFXQyxHQUF1QixJQUF0QixRQUFFMEksRUFBTyxRQUFFQyxHQUFTM0ksRUFDOUJTLEtBQUttSSxTQUFXRixFQUNoQmpJLEtBQUtvSSxTQUFXRixDQUNsQixDQUVBRyxrQkFDRSxPQUFPQyxNQUFPLEdBQUV0SSxLQUFLbUksaUJBQWtCLENBQ3JDRCxRQUFTbEksS0FBS29JLFdBQ2JHLE1BQU1DLEdBQ0F4SSxLQUFLeUkscUJBQXFCRCxJQUVyQyxDQUVBRSxjQUNFLE9BQU9KLE1BQU8sR0FBRXRJLEtBQUttSSxvQkFBcUIsQ0FDeENELFFBQVNsSSxLQUFLb0ksV0FDYkcsTUFBTUMsR0FDQXhJLEtBQUt5SSxxQkFBcUJELElBRXJDLENBRUFHLGVBQWV6SSxFQUFNMEksR0FDbkIsT0FBT04sTUFBTyxHQUFFdEksS0FBS21JLG9CQUFxQixDQUN4Q1UsT0FBUSxRQUNSWCxRQUFTbEksS0FBS29JLFNBQ2RVLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkI5SSxLQUFNQSxFQUNOMEksTUFBT0EsTUFFUkwsTUFBTUMsR0FDQXhJLEtBQUt5SSxxQkFBcUJELElBRXJDLENBRUFTLFVBQVVDLEdBQ1IsT0FBT1osTUFBTyxHQUFFdEksS0FBS21JLDJCQUE0QixDQUMvQ1UsT0FBUSxRQUNSWCxRQUFTbEksS0FBS29JLFNBQ2RVLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJFLE9BQVFBLEVBQU85SSxTQUVoQm1JLE1BQU1DLEdBQ0F4SSxLQUFLeUkscUJBQXFCRCxJQUVyQyxDQUVBVyxRQUFRakosRUFBTUUsR0FDWixPQUFPa0ksTUFBTyxHQUFFdEksS0FBS21JLGlCQUFrQixDQUNyQ1UsT0FBUSxPQUNSWCxRQUFTbEksS0FBS29JLFNBQ2RVLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkI5SSxLQUFNQSxFQUNORSxLQUFNQSxNQUVQbUksTUFBTUMsR0FDQXhJLEtBQUt5SSxxQkFBcUJELElBRXJDLENBRUE1SSxXQUFXb0IsR0FDVCxPQUFPc0gsTUFBTyxHQUFFdEksS0FBS21JLGtCQUFrQm5ILElBQVMsQ0FDOUM2SCxPQUFRLFNBQ1JYLFFBQVNsSSxLQUFLb0ksV0FDYkcsTUFBTUMsR0FDQXhJLEtBQUt5SSxxQkFBcUJELElBRXJDLENBRUFZLGlCQUFpQnBJLEVBQU9DLEdBQ3RCLE9BQU9xSCxNQUFPLEdBQUV0SSxLQUFLbUksd0JBQXdCbkgsSUFBUyxDQUNwRDZILE9BQVE1SCxFQUFVLFNBQVcsTUFDN0JpSCxRQUFTbEksS0FBS29JLFdBQ2JHLE1BQU1DLEdBQ0F4SSxLQUFLeUkscUJBQXFCRCxJQUVyQyxDQUNBQyxxQkFBcUJELEdBQ25CLE9BQU9BLEVBQUlhLEdBQUtiLEVBQUljLE9BQVNDLFFBQVFDLE9BQVEsVUFBU2hCLEVBQUlpQixTQUM1RCxHRG5Fa0IsQ0FDbEJ4QixRQUFTLGlEQUNUQyxRQUFTLENBQ1B3QixjQUFlLHVDQUNmLGVBQWdCLHNCQU1RL0csU0FBU25CLGNBQWMseUJBQy9CTyxpQkFBaUIsU0FBUyxLQUM1QyxNQUFNNEgsRUFBV0MsRUFBS2xCLGNBQ3RCbUIsRUFBa0I5QixrQkFDbEIrQixFQUFpQnhILE9BQ2pCd0gsRUFBaUI5RSxlQUFlMkUsRUFBUyxJQUdoQmhILFNBQVNuQixjQUFjLHdCQUMvQk8saUJBQWlCLFNBQVMsS0FDM0NnSSxFQUFpQmhDLGtCQUNqQmlDLEVBQWExSCxNQUFNLElBSVNLLFNBQVNuQixjQUFjLHdCQUMvQk8saUJBQWlCLFNBQVMsS0FDOUNrSSxFQUFvQmxDLGtCQUNwQm1DLEVBQVk1SCxNQUFNLElBSXBCLE1BQ011SCxFQUFvQixJQUFJTSxFQUFjckUsRUFEM0JuRCxTQUFTbkIsY0FBYyxlQUV4Q3FJLEVBQWtCaEMsbUJBQ2xCLE1BRU1rQyxFQUFtQixJQUFJSSxFQUFjckUsRUFGbkJuRCxTQUFTbkIsY0FBYyxjQUNmQSxjQUFjLGNBRTlDdUksRUFBaUJsQyxtQkFDakIsTUFDTW9DLEVBQXNCLElBQUlFLEVBQWNyRSxFQUQzQm5ELFNBQVNuQixjQUFjLGlCQUUxQ3lJLEVBQW9CcEMsbUJBR3BCLE1BQU0rQixFQUFPLElFeERFLE1BQ2J0SyxZQUFZOEssRUFBVUMsRUFBU25CLEdBQzdCbEosS0FBS29LLFNBQVd6SCxTQUFTbkIsY0FBYzRJLEdBQ3ZDcEssS0FBS3FLLFFBQVUxSCxTQUFTbkIsY0FBYzZJLEdBQ3RDckssS0FBS3NLLFFBQVUzSCxTQUFTbkIsY0FBYzBILEVBQ3hDLENBQ0FSLGNBQ0UsTUFBTyxDQUNMMEIsU0FBVXBLLEtBQUtvSyxTQUFTM0ksWUFDeEI0SSxRQUFTckssS0FBS3FLLFFBQVE1SSxZQUUxQixDQUNBOEksWUFBV2hMLEdBQWtCLElBQWpCLE1BQUVxSixFQUFLLEtBQUUxSSxHQUFNWCxFQUN6QlMsS0FBS29LLFNBQVMzSSxZQUFjdkIsRUFDNUJGLEtBQUtxSyxRQUFRNUksWUFBY21ILENBQzdCLENBQ0FLLFVBQVVDLEdBQ1JsSixLQUFLc0ssUUFBUW5JLElBQU0rRyxDQUNyQixHRnVDQSxrQkFDQSx3QkFDQSxtQkFHRixJQUFJeEosRUFDQThLLEVBQ0pqQixRQUFRa0IsSUFBSSxDQUFDekMsRUFBSVUsY0FBZVYsRUFBSUssb0JBQ2pDRSxNQUFLaEosSUFBbUIsSUFBakJFLEVBQU1pTCxHQUFNbkwsRUFDbEIsTUFBTSxLQUFFVyxFQUFJLE1BQUUwSSxFQUFLLE9BQUVNLEdBQVd6SixFQUNoQ21LLEVBQUtXLFlBQVksQ0FBRXJLLE9BQU0wSSxVQUN6QmdCLEVBQUtYLFVBQVVDLEdBQ2Z4SixFQUFTRCxFQUFLZ0IsSUFDZCtKLEVBQWMsSUFBSXRGLEVBQ2hCLENBQ0VFLE1BQU9zRixFQUNQckYsU0FBVXNGLEdGeEVILG1CRTRFWEgsRUFBWS9FLGFBQWEsSUFFMUJtRixPQUFPQyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLElBR3RCLE1BQU1GLEVBQWNsTCxJQUNsQixNQUFNdUwsRUFBYyxJQUFJM0wsRUFDdEIsQ0FDRUksT0FDQUMsU0FDQUMsaUJBQW1Cc0wsSUFDakJDLEVBQVk1SSxLQUFLMkksRUFBVSxFQUU3QnBMLGtCQUFtQkEsS0FDakJzTCxFQUFtQjdJLE9BQ25CNkksRUFBbUJDLGlCQUFnQixLQUNqQ3BELEVBQ0dwSSxXQUFXSCxFQUFLZ0IsS0FDaEI4SCxNQUFNQyxJQUNMd0MsRUFBWW5KLE9BQU8yRyxHQUNuQjJDLEVBQW1COUgsT0FBTyxJQUUzQnVILE9BQU9HLElBQ05ELFFBQVFDLE1BQU1BLEVBQU0sR0FDcEIsR0FDSixFQUVKakwsZUFBaUJzSCxJQUNmLE1BQU1uRyxFQUFVK0osRUFBWS9KLFVBQzVCK0csRUFDR29CLGlCQUFpQmhDLEVBQUluRyxHQUNyQnNILE1BQU1DLElBQ0x3QyxFQUFZNUosU0FBU29ILEVBQUkzSCxNQUFNLElBRWhDK0osT0FBT0csSUFDTkQsUUFBUUMsTUFBTUEsRUFBTSxHQUNwQixHRmhISSxrQkVzSFJNLEVBQVVMLEVBQVlsSSxVQUM1QjBILEVBQVk3RSxRQUFRMEYsRUFBUSxFQUl4QkgsRUFBYyxJRzVITCxjQUE2Qm5JLEVBQzFDekQsWUFBV0MsR0FBb0IsSUFBbkIsY0FBRXlELEdBQWV6RCxFQUMzQnNFLE1BQU0sQ0FBRWIsa0JBQ1JoRCxLQUFLc0wsY0FBZ0J0TCxLQUFLaUQsY0FBY3pCLGNBQWMsbUJBQ3REeEIsS0FBS3VMLHlCQUEyQnZMLEtBQUtpRCxjQUFjekIsY0FDakQsOEJBRUosQ0FDQWMsS0FBSzdDLEdBQ0hPLEtBQUtzTCxjQUFjbkosSUFBTTFDLEVBQUtXLEtBQzlCSixLQUFLc0wsY0FBY2xKLElBQU8sWUFBVzNDLEVBQUtTLE9BQzFDRixLQUFLdUwseUJBQXlCOUosWUFBY2hDLEVBQUtTLEtBQ2pEMkQsTUFBTXZCLE1BQ1IsR0grR3FDLENBQ3JDVSxjQUFlLG1CQUlYZ0gsRUFBZSxJQUFJckcsRUFBYyxDQUNyQ1gsY0FBZSxhQUNmWSxpQkFBbUI0SCxJQUNqQnhCLEVBQWExRixlQUFjLEdBQzNCMEQsRUFDR21CLFFBQVFxQyxFQUFZdEwsS0FBTXNMLEVBQVlwTCxNQUN0Q21JLE1BQU1rRCxJQUNMekIsRUFBYTFGLGVBQWMsR0FDM0IwRixFQUFhM0csUUFDYnNILEVBQVdjLEVBQVMsSUFFckJiLE9BQU9HLElBQ05ELFFBQVFDLE1BQU1BLEVBQU0sR0FDcEIsSUFHRmpCLEVBQW1CLElBQUluRyxFQUFjLENBQ3pDWCxjQUFlLGNBQ2ZZLGlCQUFtQjRILElBQ2pCMUIsRUFBaUJ4RixlQUFjLEdBQy9CMEQsRUFDR1csZUFBZTZDLEVBQVlwQixTQUFVb0IsRUFBWW5CLFNBQ2pEOUIsTUFBTTlJLElBQ0xxSyxFQUFpQnhGLGVBQWMsR0FDL0J3RixFQUFpQnpHLFFBQ2pCdUcsRUFBS1csWUFBWTlLLEVBQUssSUFFdkJtTCxPQUFPRyxJQUNORCxRQUFRQyxNQUFNQSxFQUFNLEdBQ3BCLElBR0ZiLEVBQWMsSUFBSXZHLEVBQWMsQ0FDcENYLGNBQWUsZ0JBQ2ZZLGlCQUFtQndELElBQ2pCOEMsRUFBWTVGLGVBQWMsR0FDMUIwRCxFQUNHaUIsVUFBVTdCLEdBQ1ZtQixNQUFNQyxJQUNMMEIsRUFBWTVGLGVBQWMsR0FDMUJzRixFQUFLWCxVQUFVVCxFQUFJVSxRQUNuQmdCLEVBQVk3RyxPQUFPLElBRXBCdUgsT0FBT0csSUFDTkQsUUFBUUMsTUFBTUEsRUFBTSxHQUNwQixJQUlGSSxFQUFxQixJSWpMWixjQUErQnBJLEVBQzVDekQsWUFBV0MsR0FBc0MsSUFBckMsY0FBRXlELEVBQWEsaUJBQUVZLEdBQWtCckUsRUFDN0NzRSxNQUFNLENBQUViLGtCQUNSaEQsS0FBS2lFLGtCQUFvQkwsRUFDekI1RCxLQUFLMEwscUJBQ0gxTCxLQUFLaUQsY0FBY3pCLGNBQWMsbUJBQ25DeEIsS0FBSzJMLGFBQWUzTCxLQUFLaUQsY0FBY3pCLGNBQWMsaUJBQ3JEeEIsS0FBSzRMLGNBQ1AsQ0FFQUEsZUFDRTVMLEtBQUsyTCxhQUFhNUosaUJBQWlCLFVBQVd3QixJQUM1Q0EsRUFBSXVFLGlCQUNKOUgsS0FBS2lFLG1CQUFtQixHQUU1QixDQUVBbUgsZ0JBQWdCUyxHQUNkN0wsS0FBS2lFLGtCQUFvQjRILENBQzNCLEdKOEo4QyxDQUM5QzdJLGNBQWUsaUJBQ2ZZLGlCQUFtQndELElBQ2pCWSxFQUNHcEksV0FBV3dILEdBQ1htQixNQUFLLEtBQ0o0QyxFQUFtQjlILE9BQU8sSUFFM0J1SCxPQUFPRyxJQUNORCxRQUFRQyxNQUFNQSxFQUFNLEdBQ3BCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAge1xyXG4gICAgICBkYXRhLFxyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICAgIGRlbGV0ZUNhcmQsXHJcbiAgICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxyXG4gICAgICBoYW5kbGVMaWtlQ2FyZCxcclxuICAgICAgaGFuZGxlQ29uZmlybSxcclxuICAgIH0sXHJcbiAgICBjYXJkU2VsZWN0b3JcclxuICApIHtcclxuICAgIHRoaXMuaGFuZGxlQ29uZmlybSA9IGhhbmRsZUNvbmZpcm07XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gaGFuZGxlTGlrZUNhcmQ7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZCA9IGRlbGV0ZUNhcmQ7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXI7XHJcbiAgfVxyXG5cclxuICBnZXRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG4gIHNldExpa2VzKGxpa2VzKSB7XHJcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICB9XHJcbiAgX3JlbmRlckxpa2VzKCkge1xyXG4gICAgdGhpcy5fbGlrZXNBbW91bnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtbnVtYmVyXCIpO1xyXG4gICAgdGhpcy5fbGlrZXNBbW91bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fY2xpY2tlZFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2NsaWNrZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCh0aGlzLl9pZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzLmdldElkKCkpO1xyXG4gICAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCB0ZXh0OiB0aGlzLl90ZXh0IH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICBfaGFuZGxlSW1hZ2VDbGljaygpIHtcclxuICAgIG1vZGFsUGljdHVyZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgbW9kYWxQaWN0dXJlLmFsdCA9IGBQaG90byBvZiAke3RoaXMuX25hbWV9YDtcclxuICAgIG1vZGFsUGljdHVyZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIG9wZW4ocGljdHVyZU1vZGFsKTtcclxuICB9XHJcblxyXG4gIF9oaWRlRGVsZXRlSWNvbigpIHtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodGhpcy5fdXNlcklkICE9PSB0aGlzLl9vd25lci5faWQpIHtcclxuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19kZWxldGUtYnV0dG9uLWhpZGRlblwiKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5faGlkZURlbGV0ZUljb24oKTtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICByZW1vdmUoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UpO1xyXG4gIH1cclxuICBfaGFuZGxlQ2xpY2tDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVFc2NhcGVDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gdGhpcy5faGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdG5UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICB9XHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVN1Ym1pdCgpIHtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBnYWxsZXJ5Q2FyZHMpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fZ2FsbGVyeUNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYWxsZXJ5Q2FyZHMpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9nYWxsZXJ5Q2FyZHMucHJlcGVuZChpdGVtRWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY2FyZFNlY3Rpb246IFwiLmdhbGxlcnlfX2NhcmRzXCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgcHJldmlld1BvcHVwOiBcIi5tb2RhbF9wcmV2aWV3XCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNcIiArIGlucHV0RWxlbWVudC5pZCArIFwiLWVycm9yXCJcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI1wiICsgaW5wdXRFbGVtZW50LmlkICsgXCItZXJyb3JcIlxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KFxyXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcclxuICAgICk7XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgc2VsZWN0b3JzLCB2YWxpZGF0aW9uQ29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtXCI7XHJcblxyXG4vLyBBUElcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0zLWVuXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIzNmQ0Y2NjZS0xMGMzLTRmZDEtOGU2OS02NTY5MmM3NjgxMzNcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gUE9QVVAgQlVUVE9OU1xyXG4vL2VkaXRcclxuY29uc3Qgb3BlbkVkaXRQb3B1cEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbm9wZW5FZGl0UG9wdXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXIuZ2V0VXNlckluZm8oKTtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0UHJvZmlsZU1vZGFsLm9wZW4oKTtcclxuICBlZGl0UHJvZmlsZU1vZGFsLnNldElucHV0VmFsdWVzKHVzZXJEYXRhKTtcclxufSk7XHJcbi8vYWRkXHJcbmNvbnN0IG9wZW5BZGRQb3B1cEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxub3BlbkFkZFBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIGF2YXRhclxyXG5jb25zdCBvcGVuQXZhdGFyUG9wdXBCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLWVkaXRcIik7XHJcbm9wZW5BdmF0YXJQb3B1cEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYXZhdGFyTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIEZvcm0gVmFsaWRhdG9yXHJcbmNvbnN0IGVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWZvcm1cIik7XHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZWRpdEZvcm0pO1xyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNvbnN0IGFkZFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLW1vZGFsXCIpO1xyXG5jb25zdCBhZGRGb3JtID0gYWRkUHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWZvcm1cIik7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBhZGRGb3JtKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNvbnN0IGF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhci1mb3JtXCIpO1xyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgYXZhdGFyRm9ybSk7XHJcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gVXNlciBJbmZvXHJcbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oXHJcbiAgXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIFwiLnByb2ZpbGVfX2ltYWdlXCJcclxuKTtcclxuXHJcbmxldCB1c2VySWQ7XHJcbmxldCBjYXJkU2VjdGlvbjtcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbZGF0YSwgY2FyZHNdKSA9PiB7XHJcbiAgICBjb25zdCB7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSA9IGRhdGE7XHJcbiAgICB1c2VyLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSk7XHJcbiAgICB1c2VyLnNldEF2YXRhcihhdmF0YXIpO1xyXG4gICAgdXNlcklkID0gZGF0YS5faWQ7XHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGNhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxyXG4gICAgICB9LFxyXG4gICAgICBzZWxlY3RvcnMuY2FyZFNlY3Rpb25cclxuICAgICk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICB9KTtcclxuXHJcbmNvbnN0IHJlbmRlckNhcmQgPSAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGRhdGEsXHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgaGFuZGxlSW1hZ2VDbGljazogKGltYWdlRGF0YSkgPT4ge1xyXG4gICAgICAgIGNhcmRQcmV2aWV3Lm9wZW4oaW1hZ2VEYXRhKTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBjb25maXJtRGVsZXRlTW9kYWwub3BlbigpO1xyXG4gICAgICAgIGNvbmZpcm1EZWxldGVNb2RhbC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5kZWxldGVDYXJkKGRhdGEuX2lkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlKHJlcyk7XHJcbiAgICAgICAgICAgICAgY29uZmlybURlbGV0ZU1vZGFsLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZUxpa2VDYXJkOiAoaWQpID0+IHtcclxuICAgICAgICBjb25zdCBpc0xpa2VkID0gY2FyZEVsZW1lbnQuaXNMaWtlZCgpO1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmNoYW5nZUxpa2VOdW1iZXIoaWQsIGlzTGlrZWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmRFbGVtZW50LnNldExpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGVcclxuICApO1xyXG5cclxuICBjb25zdCBuZXdDYXJkID0gY2FyZEVsZW1lbnQuZ2V0VmlldygpO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XHJcbn07XHJcblxyXG4vLyBQb3B1cCB3aXRoIEltYWdlXHJcbmNvbnN0IGNhcmRQcmV2aWV3ID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNwaWN0dXJlLW1vZGFsXCIsXHJcbn0pO1xyXG5cclxuLy8gUG9wdXAgd2l0aCBmb3JtXHJcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNhZGQtbW9kYWxcIixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICAgIG5ld0NhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5hZGRDYXJkKGlucHV0VmFsdWVzLm5hbWUsIGlucHV0VmFsdWVzLmxpbmspXHJcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIG5ld0NhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICByZW5kZXJDYXJkKHJlc3BvbnNlKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNlZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICBlZGl0UHJvZmlsZU1vZGFsLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmNoYW5nZVVzZXJJbmZvKGlucHV0VmFsdWVzLnVzZXJOYW1lLCBpbnB1dFZhbHVlcy51c2VySm9iKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIGVkaXRQcm9maWxlTW9kYWwucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVNb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgIHVzZXIuc2V0VXNlckluZm8oZGF0YSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcbmNvbnN0IGF2YXRhck1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2F2YXRhci1tb2RhbFwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpZCkgPT4ge1xyXG4gICAgYXZhdGFyTW9kYWwucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuc2V0QXZhdGFyKGlkKVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgYXZhdGFyTW9kYWwucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgdXNlci5zZXRBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgICAgICAgYXZhdGFyTW9kYWwuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuLy9Qb3B1cCB3aXRoIENvbmZpcm1cclxuY29uc3QgY29uZmlybURlbGV0ZU1vZGFsID0gbmV3IFBvcHVwV2l0aENvbmZpcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2NvbmZpcm0tbW9kYWxcIixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaWQpID0+IHtcclxuICAgIGFwaVxyXG4gICAgICAuZGVsZXRlQ2FyZChpZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNvbmZpcm1EZWxldGVNb2RhbC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNoYW5nZVVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcihhdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXIubGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrU2VydmVyUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGxpbms6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoZ2V0SWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2dldElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNoYW5nZUxpa2VOdW1iZXIoZ2V0SWQsIGlzTGlrZWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2dldElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBpc0xpa2VkID8gXCJERUxFVEVcIiA6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrU2VydmVyUmVzcG9uc2UocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBfY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpIHtcclxuICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlckpvYiwgYXZhdGFyKSB7XHJcbiAgICB0aGlzLnVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZSk7XHJcbiAgICB0aGlzLnVzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2IpO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXIpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJOYW1lOiB0aGlzLnVzZXJOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICB1c2VySm9iOiB0aGlzLnVzZXJKb2IudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuICBzZXRVc2VySW5mbyh7IGFib3V0LCBuYW1lIH0pIHtcclxuICAgIHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy51c2VySm9iLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG4gIHNldEF2YXRhcihhdmF0YXIpIHtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fbW9kYWxQaWN0dXJlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3BpY3R1cmVcIik7XHJcbiAgICB0aGlzLl9tb2RhbFBpY3R1cmVEZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcGljdHVyZS1kZXNjcmlwdGlvblwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHRoaXMuX21vZGFsUGljdHVyZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9tb2RhbFBpY3R1cmUuYWx0ID0gYFBob3RvIG9mICR7ZGF0YS5uYW1lfWA7XHJcbiAgICB0aGlzLl9tb2RhbFBpY3R1cmVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2NvbmZpcm1EZWxldGVCdXR0b24gPVxyXG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb25maXJtLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NvbmZpcm1Gb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1mb3JtXCIpO1xyXG4gICAgdGhpcy5fc2V0SGFuZGxlcnMoKTtcclxuICB9XHJcblxyXG4gIF9zZXRIYW5kbGVycygpIHtcclxuICAgIHRoaXMuX2NvbmZpcm1Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJ1c2VySWQiLCJoYW5kbGVJbWFnZUNsaWNrIiwiZGVsZXRlQ2FyZCIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNhcmQiLCJoYW5kbGVDb25maXJtIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2FyZCIsIl9pZCIsIl91c2VySWQiLCJfZGVsZXRlQ2FyZCIsIl9saWtlcyIsImxpa2VzIiwiX293bmVyIiwib3duZXIiLCJnZXRJZCIsImlzTGlrZWQiLCJzb21lIiwibGlrZSIsInNldExpa2VzIiwiX3JlbmRlckxpa2VzIiwiX2xpa2VzQW1vdW50IiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRleHQiLCJfdGV4dCIsIm1vZGFsUGljdHVyZSIsInNyYyIsImFsdCIsIm1vZGFsUGljdHVyZURlc2NyaXB0aW9uIiwib3BlbiIsInBpY3R1cmVNb2RhbCIsIl9oaWRlRGVsZXRlSWNvbiIsIl9kZWxldGVCdXR0b24iLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsIl9oYW5kbGVDbGlja0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlU3VibWl0IiwiYmluZCIsIl9zdWJtaXRCdG4iLCJfc3VibWl0QnRuVGV4dCIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwicmVzZXQiLCJTZWN0aW9uIiwiZ2FsbGVyeUNhcmRzIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9pdGVtcyIsIl9nYWxsZXJ5Q2FyZHMiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiaXRlbUVsZW1lbnQiLCJwcmVwZW5kIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfZm9ybSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hpZGVJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsInJlcyIsIl9jaGVja1NlcnZlclJlc3BvbnNlIiwiZ2V0VXNlckluZm8iLCJjaGFuZ2VVc2VySW5mbyIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRBdmF0YXIiLCJhdmF0YXIiLCJhZGRDYXJkIiwiY2hhbmdlTGlrZU51bWJlciIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJhdXRob3JpemF0aW9uIiwidXNlckRhdGEiLCJ1c2VyIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJlZGl0UHJvZmlsZU1vZGFsIiwiYWRkRm9ybVZhbGlkYXRvciIsIm5ld0NhcmRQb3B1cCIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJhdmF0YXJNb2RhbCIsIkZvcm1WYWxpZGF0b3IiLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJfYXZhdGFyIiwic2V0VXNlckluZm8iLCJjYXJkU2VjdGlvbiIsImFsbCIsImNhcmRzIiwicmVuZGVyQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiY2FyZEVsZW1lbnQiLCJpbWFnZURhdGEiLCJjYXJkUHJldmlldyIsImNvbmZpcm1EZWxldGVNb2RhbCIsInNldFN1Ym1pdEFjdGlvbiIsIm5ld0NhcmQiLCJfbW9kYWxQaWN0dXJlIiwiX21vZGFsUGljdHVyZURlc2NyaXB0aW9uIiwiaW5wdXRWYWx1ZXMiLCJyZXNwb25zZSIsIl9jb25maXJtRGVsZXRlQnV0dG9uIiwiX2NvbmZpcm1Gb3JtIiwiX3NldEhhbmRsZXJzIiwiYWN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==