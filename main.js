!function(){"use strict";class e{constructor(e,t){let{data:s,userId:r,handleImageClick:i,deleteCard:n,handleDeleteClick:o,handleLikeCard:a,handleConfirm:l}=e;this.handleConfirm=l,this._name=s.name,this._link=s.link,this._cardSelector=t,this._handleImageClick=i,this._handleDeleteClick=o,this._handleLikeCard=a,this._id=s._id,this._userId=r,this._deleteCard=n,this._likes=s.likes,this._owner=s.owner}getId(){return this._id}isLiked(){return this._likes.some((e=>e._id===this._userId))}setLikes(e){this._likes=e,this._renderLikes()}_renderLikes(){this._likesAmount=this._cardElement.querySelector(".card__like-number"),this._likesAmount.textContent=this._likes.length,this.isLiked()?this._cardElement.querySelector(".card__like-button").classList.add("card__like-button_clicked"):this._cardElement.querySelector(".card__like-button").classList.remove("card__like-button_clicked")}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeCard(this._id)})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteClick(this.getId())})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick({link:this._link,name:this._name})}))}_handleImageClick(){modalPicture.src=this._link,modalPicture.alt=`Photo of ${this._name}`,modalPictureDescription.textContent=this._name,open(pictureModal)}_hideDeleteIcon(){this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._userId!==this._owner._id&&this._deleteButton.classList.add("card__delete-button-hidden")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._hideDeleteIcon(),this._renderLikes(),this._cardElement}remove(){this._cardElement.remove(),this._cardElement=null}}class t{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose),this._closeButton.addEventListener("click",this._handleClickClose),this._popupElement.addEventListener("mousedown",this._handleClickClose)}close(){document.removeEventListener("keydown",this._handleEscapeClose),this._popupElement.removeEventListener("mousedown",this._handleClickClose),this._popupElement.classList.remove("modal_opened"),this._closeButton.removeEventListener("click",this._handleClickClose)}_handleClickClose=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()};_handleEscapeClose=e=>{"Escape"===e.key&&this.close()}}class s extends t{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupElement.querySelectorAll(".modal__input"),this._handleFormSubmit=s,this._handleSubmit=this._handleSubmit.bind(this),this._submitBtn=this._popupElement.querySelector(".modal__button"),this._submitBtnText=this._submitBtn.textContent}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}_handleSubmit(){this._handleFormSubmit(this._getInputValues())}open(){this._popupForm.addEventListener("submit",this._handleSubmit),super.open()}close(){this._popupForm.removeEventListener("submit",this._handleSubmit),this._popupForm.reset(),super.close()}}class r{constructor(e,t){let{items:s,renderer:r}=e;this._renderer=r,this._items=s,this._galleryCards=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._galleryCards.prepend(e)}}const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};var n=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_showInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}toggleButtonState(){this._hasInvalidInput()?this.disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}resetValidation(){this._form.reset(),this.disableButton()}};const o=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>this._checkServerResponse(e)))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>this._checkServerResponse(e)))}changeUserInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((e=>this._checkServerResponse(e)))}setAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then((e=>this._checkServerResponse(e)))}addCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((e=>this._checkServerResponse(e)))}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>this._checkServerResponse(e)))}changeLikeNumber(e,t){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:t?"DELETE":"PUT",headers:this._headers}).then((e=>this._checkServerResponse(e)))}_checkServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"36d4ccce-10c3-4fd1-8e69-65692c768133","Content-Type":"application/json"}});document.querySelector(".profile__edit-button").addEventListener("click",(()=>{const e=c.getUserInfo();a.resetValidation(),S.open(),S.setInputValues(e)})),document.querySelector(".profile__add-button").addEventListener("click",(()=>{l.resetValidation(),p.open()})),document.querySelector(".profile__image-edit").addEventListener("click",(()=>{d.resetValidation(),b.open()}));const a=new n(i,document.querySelector("#edit-form"));a.enableValidation();const l=new n(i,document.querySelector("#add-modal").querySelector("#add-form"));l.enableValidation();const d=new n(i,document.querySelector("#avatar-form"));d.enableValidation();const c=new class{constructor(e,t,s){this.userName=document.querySelector(e),this.userJob=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{userName:this.userName.textContent,userJob:this.userJob.textContent}}setUserInfo(e){let{about:t,name:s}=e;this.userName.textContent=s,this.userJob.textContent=t}setAvatar(e){this._avatar.src=e}}(".profile__title",".profile__description",".profile__image");let h,u;Promise.all([o.getUserInfo(),o.getInitialCards()]).then((e=>{let[t,s]=e;const{name:i,about:n,avatar:o}=t;c.setUserInfo({name:i,about:n}),c.setAvatar(o),h=t._id,u=new r({items:s,renderer:_},".gallery__cards"),u.renderItems()})).catch((e=>{console.error(e)}));const _=t=>{const s=new e({data:t,userId:h,handleImageClick:e=>{m.open(e)},handleDeleteClick:()=>{k.open(),k.setSubmitAction((()=>{o.deleteCard(t._id).then((e=>{s.remove(e),k.close()})).catch((e=>{console.error(e)}))}))},handleLikeCard:e=>{const t=s.isLiked();o.changeLikeNumber(e,t).then((e=>{s.setLikes(e.likes)})).catch((e=>{console.error(e)}))}},"#card-template"),r=s.getView();u.addItem(r)},m=new class extends t{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._modalPicture=this._popupElement.querySelector(".modal__picture"),this._modalPictureDescription=this._popupElement.querySelector(".modal__picture-description")}open(e){this._modalPicture.src=e.link,this._modalPicture.alt=`Photo of ${e.name}`,this._modalPictureDescription.textContent=e.name,super.open()}}({popupSelector:"#picture-modal"}),p=new s({popupSelector:"#add-modal",handleFormSubmit:e=>{p.renderLoading(!0),o.addCard(e.name,e.link).then((e=>{p.close(),_(e)})).finally((()=>{p.renderLoading(!1)})).catch((e=>{console.error(e)}))}}),S=new s({popupSelector:"#edit-modal",handleFormSubmit:e=>{S.renderLoading(!0),o.changeUserInfo(e.userName,e.userJob).then((e=>{S.close(),c.setUserInfo(e)})).finally((()=>{S.renderLoading(!1)})).catch((e=>{console.error(e)}))}}),b=new s({popupSelector:"#avatar-modal",handleFormSubmit:e=>{b.renderLoading(!0),o.setAvatar(e).then((e=>{c.setAvatar(e.avatar),b.close()})).finally((()=>{b.renderLoading(!1)})).catch((e=>{console.error(e)}))}}),k=new class extends t{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._handleFormSubmit=s,this._confirmDeleteButton=this._popupElement.querySelector("#confirm-button"),this._confirmForm=this._popupElement.querySelector("#confirm-form"),this._setHandlers()}_setHandlers(){this._confirmForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setSubmitAction(e){this._handleFormSubmit=e}}({popupSelector:"#confirm-modal",handleFormSubmit:e=>{o.deleteCard(e).then((()=>{k.close()})).catch((e=>{console.error(e)}))}})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUsrQyxjQUFjdkIsY0FBYyxtQkFDbkN4QixLQUFLMEwsYUFBZTFMLEtBQUsrQyxjQUFjdkIsY0FBYyxpQkFDckR4QixLQUFLMkwsY0FDUCxDQUVBQSxlQUNFM0wsS0FBSzBMLGFBQWEzSixpQkFBaUIsVUFBV3NCLElBQzVDQSxFQUFJdUUsaUJBQ0o1SCxLQUFLK0QsbUJBQW1CLEdBRTVCLENBRUFtSCxnQkFBZ0JVLEdBQ2Q1TCxLQUFLK0Qsa0JBQW9CNkgsQ0FDM0IsR0pvSzhDLENBQzlDOUksY0FBZSxpQkFDZlksaUJBQW1Cd0QsSUFDakJZLEVBQ0dsSSxXQUFXc0gsR0FDWG1CLE1BQUssS0FDSjRDLEVBQW1COUgsT0FBTyxJQUUzQnVILE9BQU9HLElBQ05ELFFBQVFDLE1BQU1BLEVBQU0sR0FDcEIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9Db25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7XHJcbiAgICAgIGRhdGEsXHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgICAgZGVsZXRlQ2FyZCxcclxuICAgICAgaGFuZGxlRGVsZXRlQ2xpY2ssXHJcbiAgICAgIGhhbmRsZUxpa2VDYXJkLFxyXG4gICAgICBoYW5kbGVDb25maXJtLFxyXG4gICAgfSxcclxuICAgIGNhcmRTZWxlY3RvclxyXG4gICkge1xyXG4gICAgdGhpcy5oYW5kbGVDb25maXJtID0gaGFuZGxlQ29uZmlybTtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNhcmQgPSBoYW5kbGVMaWtlQ2FyZDtcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9kZWxldGVDYXJkID0gZGVsZXRlQ2FyZDtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX293bmVyID0gZGF0YS5vd25lcjtcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcclxuICB9XHJcbiAgc2V0TGlrZXMobGlrZXMpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH1cclxuICBfcmVuZGVyTGlrZXMoKSB7XHJcbiAgICB0aGlzLl9saWtlc0Ftb3VudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1udW1iZXJcIik7XHJcbiAgICB0aGlzLl9saWtlc0Ftb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9jbGlja2VkXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fY2xpY2tlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkKHRoaXMuX2lkKTtcclxuICAgICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuZ2V0SWQoKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUltYWdlQ2xpY2soKSB7XHJcbiAgICBtb2RhbFBpY3R1cmUuc3JjID0gdGhpcy5fbGluaztcclxuICAgIG1vZGFsUGljdHVyZS5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XHJcbiAgICBtb2RhbFBpY3R1cmVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBvcGVuKHBpY3R1cmVNb2RhbCk7XHJcbiAgfVxyXG5cclxuICBfaGlkZURlbGV0ZUljb24oKSB7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fb3duZXIuX2lkKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fZGVsZXRlLWJ1dHRvbi1oaWRkZW5cIik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2hpZGVEZWxldGVJY29uKCk7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19jbG9zZS1idXR0b25cIlxyXG4gICAgKTtcclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcclxuICB9XHJcbiAgX2hhbmRsZUNsaWNrQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoXHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFuZGxlRXNjYXBlQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IHRoaXMuX2hhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0blRleHQgPSB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnRuVGV4dDtcclxuICAgIH1cclxuICB9XHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXQoKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgZ2FsbGVyeUNhcmRzKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX2dhbGxlcnlDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2FsbGVyeUNhcmRzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZ2FsbGVyeUNhcmRzLnByZXBlbmQoaXRlbUVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRTZWN0aW9uOiBcIi5nYWxsZXJ5X19jYXJkc1wiLFxyXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gIHByZXZpZXdQb3B1cDogXCIubW9kYWxfcHJldmlld1wiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjXCIgKyBpbnB1dEVsZW1lbnQuaWQgKyBcIi1lcnJvclwiXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNcIiArIGlucHV0RWxlbWVudC5pZCArIFwiLWVycm9yXCJcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IHNlbGVjdG9ycywgdmFsaWRhdGlvbkNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybVwiO1xyXG5cclxuLy8gQVBJXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMy1lblwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMzZkNGNjY2UtMTBjMy00ZmQxLThlNjktNjU2OTJjNzY4MTMzXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIFBPUFVQIEJVVFRPTlNcclxuLy9lZGl0XHJcbmNvbnN0IG9wZW5FZGl0UG9wdXBCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5vcGVuRWRpdFBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VyLmdldFVzZXJJbmZvKCk7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5vcGVuKCk7XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5zZXRJbnB1dFZhbHVlcyh1c2VyRGF0YSk7XHJcbn0pO1xyXG4vL2FkZFxyXG5jb25zdCBvcGVuQWRkUG9wdXBCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbm9wZW5BZGRQb3B1cEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyBhdmF0YXJcclxuY29uc3Qgb3BlbkF2YXRhclBvcHVwQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1lZGl0XCIpO1xyXG5vcGVuQXZhdGFyUG9wdXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGF2YXRhck1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyBGb3JtIFZhbGlkYXRvclxyXG5jb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1mb3JtXCIpO1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGVkaXRGb3JtKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBhZGRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1tb2RhbFwiKTtcclxuY29uc3QgYWRkRm9ybSA9IGFkZFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1mb3JtXCIpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgYWRkRm9ybSk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItZm9ybVwiKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGF2YXRhckZvcm0pO1xyXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vIFVzZXIgSW5mb1xyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKFxyXG4gIFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICBcIi5wcm9maWxlX19pbWFnZVwiXHJcbik7XHJcblxyXG5sZXQgdXNlcklkO1xyXG5sZXQgY2FyZFNlY3Rpb247XHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcclxuICAudGhlbigoW2RhdGEsIGNhcmRzXSkgPT4ge1xyXG4gICAgY29uc3QgeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0gPSBkYXRhO1xyXG4gICAgdXNlci5zZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pO1xyXG4gICAgdXNlci5zZXRBdmF0YXIoYXZhdGFyKTtcclxuICAgIHVzZXJJZCA9IGRhdGEuX2lkO1xyXG4gICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcclxuICAgICAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICAgICAgfSxcclxuICAgICAgc2VsZWN0b3JzLmNhcmRTZWN0aW9uXHJcbiAgICApO1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSk7XHJcblxyXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEpID0+IHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhLFxyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2s6IChpbWFnZURhdGEpID0+IHtcclxuICAgICAgICBjYXJkUHJldmlldy5vcGVuKGltYWdlRGF0YSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgY29uZmlybURlbGV0ZU1vZGFsLm9wZW4oKTtcclxuICAgICAgICBjb25maXJtRGVsZXRlTW9kYWwuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAuZGVsZXRlQ2FyZChkYXRhLl9pZClcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmRFbGVtZW50LnJlbW92ZShyZXMpO1xyXG4gICAgICAgICAgICAgIGNvbmZpcm1EZWxldGVNb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVMaWtlQ2FyZDogKGlkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXNMaWtlZCA9IGNhcmRFbGVtZW50LmlzTGlrZWQoKTtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5jaGFuZ2VMaWtlTnVtYmVyKGlkLCBpc0xpa2VkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjYXJkRWxlbWVudC5zZXRMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgbmV3Q2FyZCA9IGNhcmRFbGVtZW50LmdldFZpZXcoKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG59O1xyXG5cclxuLy8gUG9wdXAgd2l0aCBJbWFnZVxyXG5jb25zdCBjYXJkUHJldmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIjcGljdHVyZS1tb2RhbFwiLFxyXG59KTtcclxuXHJcbi8vIFBvcHVwIHdpdGggZm9ybVxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIjYWRkLW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICBuZXdDYXJkUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuYWRkQ2FyZChpbnB1dFZhbHVlcy5uYW1lLCBpbnB1dFZhbHVlcy5saW5rKVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICByZW5kZXJDYXJkKHJlc3BvbnNlKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIG5ld0NhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNlZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICBlZGl0UHJvZmlsZU1vZGFsLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmNoYW5nZVVzZXJJbmZvKGlucHV0VmFsdWVzLnVzZXJOYW1lLCBpbnB1dFZhbHVlcy51c2VySm9iKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIGVkaXRQcm9maWxlTW9kYWwuY2xvc2UoKTtcclxuICAgICAgICB1c2VyLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVNb2RhbC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuY29uc3QgYXZhdGFyTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIjYXZhdGFyLW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlkKSA9PiB7XHJcbiAgICBhdmF0YXJNb2RhbC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5zZXRBdmF0YXIoaWQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB1c2VyLnNldEF2YXRhcihyZXMuYXZhdGFyKTtcclxuICAgICAgICBhdmF0YXJNb2RhbC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgYXZhdGFyTW9kYWwucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcbi8vUG9wdXAgd2l0aCBDb25maXJtXHJcbmNvbnN0IGNvbmZpcm1EZWxldGVNb2RhbCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNjb25maXJtLW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlkKSA9PiB7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoaWQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjb25maXJtRGVsZXRlTW9kYWwuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VVc2VySW5mbyhuYW1lLCBhYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogYXZhdGFyLmxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQobmFtZSwgbGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGdldElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtnZXRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VMaWtlTnVtYmVyKGdldElkLCBpc0xpa2VkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtnZXRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgX2NoZWNrU2VydmVyUmVzcG9uc2UocmVzKSB7XHJcbiAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWUsIHVzZXJKb2IsIGF2YXRhcikge1xyXG4gICAgdGhpcy51c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWUpO1xyXG4gICAgdGhpcy51c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyKTtcclxuICB9XHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VyTmFtZTogdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgdXNlckpvYjogdGhpcy51c2VySm9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8oeyBhYm91dCwgbmFtZSB9KSB7XHJcbiAgICB0aGlzLnVzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMudXNlckpvYi50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gIH1cclxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX21vZGFsUGljdHVyZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19waWN0dXJlXCIpO1xyXG4gICAgdGhpcy5fbW9kYWxQaWN0dXJlRGVzY3JpcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3BpY3R1cmUtZGVzY3JpcHRpb25cIlxyXG4gICAgKTtcclxuICB9XHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICB0aGlzLl9tb2RhbFBpY3R1cmUuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbW9kYWxQaWN0dXJlLmFsdCA9IGBQaG90byBvZiAke2RhdGEubmFtZX1gO1xyXG4gICAgdGhpcy5fbW9kYWxQaWN0dXJlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9jb25maXJtRGVsZXRlQnV0dG9uID1cclxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29uZmlybS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jb25maXJtRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbmZpcm0tZm9ybVwiKTtcclxuICAgIHRoaXMuX3NldEhhbmRsZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0SGFuZGxlcnMoKSB7XHJcbiAgICB0aGlzLl9jb25maXJtRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGFjdGlvbjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwidXNlcklkIiwiaGFuZGxlSW1hZ2VDbGljayIsImRlbGV0ZUNhcmQiLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDYXJkIiwiaGFuZGxlQ29uZmlybSIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNhcmQiLCJfaWQiLCJfdXNlcklkIiwiX2RlbGV0ZUNhcmQiLCJfbGlrZXMiLCJsaWtlcyIsIl9vd25lciIsIm93bmVyIiwiZ2V0SWQiLCJpc0xpa2VkIiwic29tZSIsImxpa2UiLCJzZXRMaWtlcyIsIl9yZW5kZXJMaWtlcyIsIl9saWtlc0Ftb3VudCIsIl9jYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJtb2RhbFBpY3R1cmUiLCJzcmMiLCJhbHQiLCJtb2RhbFBpY3R1cmVEZXNjcmlwdGlvbiIsIm9wZW4iLCJwaWN0dXJlTW9kYWwiLCJfaGlkZURlbGV0ZUljb24iLCJfZGVsZXRlQnV0dG9uIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjYXBlQ2xvc2UiLCJfaGFuZGxlQ2xpY2tDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwia2V5IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsImJpbmQiLCJfc3VibWl0QnRuIiwiX3N1Ym1pdEJ0blRleHQiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiU2VjdGlvbiIsImdhbGxlcnlDYXJkcyIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfaXRlbXMiLCJfZ2FsbGVyeUNhcmRzIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsIml0ZW1FbGVtZW50IiwicHJlcGVuZCIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm0iLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsIl9oaWRlSW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9pbnB1dEVsZW1lbnRzIiwiZXZlcnkiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJfY2hlY2tTZXJ2ZXJSZXNwb25zZSIsImdldFVzZXJJbmZvIiwiY2hhbmdlVXNlckluZm8iLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic2V0QXZhdGFyIiwiYXZhdGFyIiwiYWRkQ2FyZCIsImNoYW5nZUxpa2VOdW1iZXIiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYXV0aG9yaXphdGlvbiIsInVzZXJEYXRhIiwidXNlciIsImVkaXRGb3JtVmFsaWRhdG9yIiwiZWRpdFByb2ZpbGVNb2RhbCIsImFkZEZvcm1WYWxpZGF0b3IiLCJuZXdDYXJkUG9wdXAiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwiYXZhdGFyTW9kYWwiLCJGb3JtVmFsaWRhdG9yIiwidXNlck5hbWUiLCJ1c2VySm9iIiwiX2F2YXRhciIsInNldFVzZXJJbmZvIiwiY2FyZFNlY3Rpb24iLCJhbGwiLCJjYXJkcyIsInJlbmRlckNhcmQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImNhcmRFbGVtZW50IiwiaW1hZ2VEYXRhIiwiY2FyZFByZXZpZXciLCJjb25maXJtRGVsZXRlTW9kYWwiLCJzZXRTdWJtaXRBY3Rpb24iLCJuZXdDYXJkIiwiX21vZGFsUGljdHVyZSIsIl9tb2RhbFBpY3R1cmVEZXNjcmlwdGlvbiIsImlucHV0VmFsdWVzIiwicmVzcG9uc2UiLCJmaW5hbGx5IiwiX2NvbmZpcm1EZWxldGVCdXR0b24iLCJfY29uZmlybUZvcm0iLCJfc2V0SGFuZGxlcnMiLCJhY3Rpb24iXSwic291cmNlUm9vdCI6IiJ9